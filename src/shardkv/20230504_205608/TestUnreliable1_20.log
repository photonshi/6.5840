Test: unreliable 1...
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
 in apply ch ------------- 
  2 in gid 101's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 101's current config: {Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]} 
   2 in gid 101's dupmap is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 101's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  2 in gid 101's shard is 0
------------
No dups, proceed!
2 in gid 101 STARTING MIGRATION IN HANDLECONFIG! NEEDLIST IS []
2 in gid 101 FINISHED MIGRATION!!!!!!
 current Config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
 kvtable map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
 in apply ch ------------- 
  1 in gid 101's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 101's current config: {Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]} 
   1 in gid 101's dupmap is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 101's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  1 in gid 101's shard is 0
------------
No dups, proceed!
1 in gid 101 STARTING MIGRATION IN HANDLECONFIG! NEEDLIST IS []
1 in gid 101 FINISHED MIGRATION!!!!!!
 current Config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
 kvtable map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
 in apply ch ------------- 
  0 in gid 101's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 101's current config: {Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]} 
   0 in gid 101's dupmap is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 101's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  0 in gid 101's shard is 0
------------
No dups, proceed!
0 in gid 101 STARTING MIGRATION IN HANDLECONFIG! NEEDLIST IS []
0 in gid 101 FINISHED MIGRATION!!!!!!
 current Config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
 kvtable map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
about to call Snapshot from server 0!
about to call Snapshot from server 2!
 in apply ch ------------- 
  2 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 100's current config: {Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]} 
   2 in gid 100's dupmap is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 100's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  2 in gid 100's shard is 0
------------
No dups, proceed!
2 in gid 100 STARTING MIGRATION IN HANDLECONFIG! NEEDLIST IS []
2 in gid 100 FINISHED MIGRATION!!!!!!
 current Config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
 kvtable map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
 in apply ch ------------- 
  1 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 100's current config: {Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]} 
   1 in gid 100's dupmap is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 100's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  1 in gid 100's shard is 0
------------
No dups, proceed!
1 in gid 100 STARTING MIGRATION IN HANDLECONFIG! NEEDLIST IS []
1 in gid 100 FINISHED MIGRATION!!!!!!
 current Config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
 kvtable map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
 in apply ch ------------- 
  1 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   1 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 100's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  1 in gid 100's shard is 0
------------
1 in gid 100 has a FUCKING DUP!

about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
 in apply ch ------------- 
  1 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   1 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 100's incoming op is {ClientID:1367266278995241337 RequestNum:0 Command:Put Key:0 Value:LdLI8 Config:{Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]}} 
  1 in gid 100's shard is 8
------------
No dups, proceed!
THIS SHARD IS MINE!
1 in gid 100 's kvtable after handle op: map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[0:LdLI8] 9:map[]]
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
 in apply ch ------------- 
  0 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 100's current config: {Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]} 
   0 in gid 100's dupmap is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 100's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  0 in gid 100's shard is 0
------------
No dups, proceed!
0 in gid 100 STARTING MIGRATION IN HANDLECONFIG! NEEDLIST IS []
0 in gid 100 FINISHED MIGRATION!!!!!!
 current Config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
 kvtable map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
 in apply ch ------------- 
  0 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   0 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 100's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  0 in gid 100's shard is 0
------------
0 in gid 100 has a FUCKING DUP!

 in apply ch ------------- 
  0 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   0 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  0 in gid 100's incoming op is {ClientID:1367266278995241337 RequestNum:0 Command:Put Key:0 Value:LdLI8 Config:{Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]}} 
  0 in gid 100's shard is 8
------------
No dups, proceed!
THIS SHARD IS MINE!
0 in gid 100 's kvtable after handle op: map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[0:LdLI8] 9:map[]]
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
 in apply ch ------------- 
  1 in gid 102's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 102's current config: {Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]} 
   1 in gid 102's dupmap is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  1 in gid 102's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  1 in gid 102's shard is 0
------------
No dups, proceed!
1 in gid 102 STARTING MIGRATION IN HANDLECONFIG! NEEDLIST IS []
1 in gid 102 FINISHED MIGRATION!!!!!!
 current Config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
 kvtable map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
 in apply ch ------------- 
  2 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   2 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 100's incoming op is {ClientID:0 RequestNum:0 Command:Config Key: Value: Config:{Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]}} 
  2 in gid 100's shard is 0
------------
2 in gid 100 has a FUCKING DUP!

 in apply ch ------------- 
  2 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   2 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[] 9:map[]]
  2 in gid 100's incoming op is {ClientID:1367266278995241337 RequestNum:0 Command:Put Key:0 Value:LdLI8 Config:{Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]}} 
  2 in gid 100's shard is 8
------------
No dups, proceed!
THIS SHARD IS MINE!
2 in gid 100 's kvtable after handle op: map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[0:LdLI8] 9:map[]]
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
 in apply ch ------------- 
  2 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[0:LdLI8] 9:map[]]
  2 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   2 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[1367266278995241337:{Result: ReqNum:0 Error:OK}] 9:map[]]
  2 in gid 100's incoming op is {ClientID:1367266278995241337 RequestNum:1 Command:Put Key:1 Value:9jn1L Config:{Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]}} 
  2 in gid 100's shard is 9
------------
No dups, proceed!
THIS SHARD IS MINE!
2 in gid 100 's kvtable after handle op: map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[0:LdLI8] 9:map[1:9jn1L]]
about to call Snapshot from server 2!
about to call Snapshot from server 1!
about to call Snapshot from server 1!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 2!
about to call Snapshot from server 2!
about to call Snapshot from server 1!
 in apply ch ------------- 
  1 in gid 100's kvtable is map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[0:LdLI8] 9:map[]]
  1 in gid 100's current config: {Num:1 Shards:[100 100 100 100 100 100 100 100 100 100] Groups:map[100:[server-100-0 server-100-1 server-100-2]]} 
   1 in gid 100's dupmap is map[0:map[0:{Result: ReqNum:0 Error:OK}] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[1367266278995241337:{Result: ReqNum:0 Error:OK}] 9:map[]]
  1 in gid 100's incoming op is {ClientID:1367266278995241337 RequestNum:1 Command:Put Key:1 Value:9jn1L Config:{Num:0 Shards:[0 0 0 0 0 0 0 0 0 0] Groups:map[]}} 
  1 in gid 100's shard is 9
------------
No dups, proceed!
THIS SHARD IS MINE!
1 in gid 100 's kvtable after handle op: map[0:map[] 1:map[] 2:map[] 3:map[] 4:map[] 5:map[] 6:map[] 7:map[] 8:map[0:LdLI8] 9:map[1:9jn1L]]
about to call Snapshot from server 0!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 1!
about to call Snapshot from server 0!
about to call Snapshot from server 2!
panic: interface conversion: interface {} is string, not shardkv.Op

goroutine 61 [running]:
6.5840/shardkv.(*ShardKV).ApplyChTicker(0xc000136480)
	/Users/phoebeshi/Documents/2022-2023/spring2023/6.5840 gen/6.5840_copy/src/shardkv/server.go:425 +0xb7b
created by 6.5840/shardkv.StartServer
	/Users/phoebeshi/Documents/2022-2023/spring2023/6.5840 gen/6.5840_copy/src/shardkv/server.go:577 +0x42a
exit status 2
FAIL	6.5840/shardkv	2.848s
